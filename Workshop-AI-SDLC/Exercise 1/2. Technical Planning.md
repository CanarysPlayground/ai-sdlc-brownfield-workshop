# Workshop 1: Development Persona ‚Äì Phase 2 (Updated)
## Technical Planning & Scaffolding with Spec Kit

---

## üìã **OVERVIEW**

**Workshop**: Development Persona ‚Äì Requirement to Code  
**Phase**: 2 of 3 (Technical Planning & Scaffolding)  

### **Scenario**
Building on Phase 1, where you created a GitHub Issue for implementing the missing **Cart Icon with Item Count Badge** (full-stack solution), you will now:
- Use GitHub Copilot Spec Kit to break down the issue into technical tasks (frontend AND backend)
- Create design guardrails to ensure consistency with existing architecture
- Generate technical specifications and scaffolding for cart components (UI + API)
- Scaffold backend cart API endpoints and database integration
- Prepare structured implementation plans with clear milestones for full-stack implementation

### **Learning Objectives**
By completing Phase 2, you will learn to:
- ‚úÖ Use Spec Kit to analyze GitHub Issues and create full-stack execution plans
- ‚úÖ Define design guardrails using `.github/instructions.md` (frontend + backend)
- ‚úÖ Generate component scaffolding following architectural patterns (UI + API)
- ‚úÖ Scaffold backend cart API endpoints and cart service layer
- ‚úÖ Create implementation milestones and task breakdowns for full-stack features
- ‚úÖ Validate scaffolded components against design standards
- ‚úÖ Document technical specifications for AI-assisted implementation

---

## üéØ **PREREQUISITES**

### **Required Tools**
- ‚úÖ Visual Studio Code with GitHub Copilot extension
- ‚úÖ GitHub Copilot Chat with Spec Kit enabled
- ‚úÖ GitHub MCP (Model Context Protocol) configured
- ‚úÖ Git installed and configured
- ‚úÖ Node.js 18+ and npm installed

### **Completion Requirements**
- ‚úÖ **Phase 1 completed**: GitHub Issue created for Cart Icon feature
- ‚úÖ **GitHub Issue Number**: Note your issue number from Phase 1 (e.g., #15)
- ‚úÖ **Documentation from Phase 1**:
  - `docs/investigation/cart-issue-analysis.md`
  - `docs/knowledge-repository/high-level-design.md`
  - `docs/knowledge-repository/technical-design-document.md`
  - `docs/knowledge-repository/current-requirements.md`
  - `docs/knowledge-repository/missing-requirements.md`
  - `docs/specifications/cart-icon-feature-requirements.md`
  - `docs/github-issue-draft.md`
  - `docs/github-issue-summary.md`


## üîó **Continuation from Phase 1**

This exercise builds directly on Phase 1. You will:
- Take the GitHub Issue you created for the Cart Icon feature
- Use Spec Kit to break it down into technical tasks
- Create design guardrails to guide AI implementation
- Scaffold CartIcon component and related cart UI following architectural patterns

---

## üöÄ **PHASE 2: TECHNICAL PLANNING & SCAFFOLDING**

---

### **STEP 1: Review GitHub Issue from Phase 1** 

#### 1.1 Open Your GitHub Issue
- Navigate to your repository on GitHub: `CanarysPlayground/ai-sdlc-brownfield-workshop`
- Go to **Issues** tab
- Open the issue you created in Phase 1: `[Cart Icon] Implement Missing Cart Icon with Item Count Badge`

#### 1.2 Copy Issue Details
- Copy the issue URL (you'll need this for Spec Kit)
- Review the issue description, acceptance criteria, and technical requirements
- Note the issue number (e.g., #15)

#### 1.3 Review Specification Documents from Phase 1
Open and review these documents:
- `docs/specifications/cart-icon-feature-requirements.md`
- `docs/investigation/cart-issue-analysis.md`
- `docs/knowledge-repository/technical-design-document.md`

**Key Requirements to Focus On:**
- Cart icon component in header
- Item count badge
- Toast notifications
- localStorage persistence
- Dark mode support
- Accessibility features

---

### **STEP 2: Create Design Guardrails Configuration** 

Design guardrails ensure that AI-generated code follows your existing architectural patterns, design system, and coding standards.

#### 2.1 Create GitHub Configuration Folder
```bash
mkdir -p .github
```

#### 2.2 Create Instructions File
Create new file: `.github/instructions.md`

#### 2.3 Define Design Guardrails

Add the following content to `.github/instructions.md`:

```markdown
# Development Instructions & Design Guardrails

## Project: OctoCAT Supply Chain Management System

This document provides guidelines and constraints for AI-assisted development to ensure consistency with established architectural patterns.

---

## üèóÔ∏è **Architecture Patterns**

### Component Structure
- Use functional components with React Hooks
- Follow component composition pattern
- Keep components under 200 lines of code
- Separate business logic from presentation

### File Organization
```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ cart/              # Cart-specific components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartIcon.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartBadge.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ common/            # Reusable components
‚îÇ   ‚îî‚îÄ‚îÄ layout/            # Layout components (Header, Footer)
‚îú‚îÄ‚îÄ context/               # React Context providers
‚îÇ   ‚îî‚îÄ‚îÄ CartContext.tsx
‚îú‚îÄ‚îÄ hooks/                 # Custom React hooks
‚îú‚îÄ‚îÄ api/                   # API client code
‚îî‚îÄ‚îÄ utils/                 # Utility functions
```

---

## üé® **Design System**

### Color Palette
```css
/* Primary Colors */
--primary: #76B852;
--primary-hover: #5a9640;
--primary-light: #a8d088;
--primary-dark: #4a7d33;

/* Neutral Colors */
--gray-50: #f9fafb;
--gray-100: #f3f4f6;
--gray-200: #e5e7eb;
--gray-300: #d1d5db;
--gray-400: #9ca3af;
--gray-500: #6b7280;
--gray-600: #4b5563;
--gray-700: #374151;
--gray-800: #1f2937;
--gray-900: #111827;

/* Semantic Colors */
--success: #10b981;
--warning: #f59e0b;
--error: #ef4444;
--cart-badge: #ef4444; /* Red for cart badge */
```

### Typography
- **Font Family**: Inter, system-ui, sans-serif
- **Base Size**: 16px
- **Scale**: 0.75rem, 0.875rem, 1rem, 1.125rem, 1.25rem, 1.5rem
- **Line Height**: 1.5 (body), 1.2 (headings)
- **Font Weights**: 400 (regular), 500 (medium), 600 (semibold), 700 (bold)

### Spacing System
- **Base Unit**: 4px (0.25rem)
- **Scale**: 4px, 8px, 12px, 16px, 20px, 24px, 32px, 40px
- Use Tailwind spacing utilities: `p-4`, `m-6`, `gap-4`

### Border Radius
- **Small**: 4px (`rounded`)
- **Medium**: 8px (`rounded-lg`)
- **Large**: 12px (`rounded-xl`)
- **Full**: 9999px (`rounded-full`)

### Icon Sizing
- **Small**: 16px (w-4 h-4)
- **Medium**: 20px (w-5 h-5)
- **Large**: 24px (w-6 h-6)
- **Cart Icon**: 24px (w-6 h-6)

---


### Cart Icon Design
- **Position**: Top-right of header
- **Icon**: ShoppingCartIcon from Heroicons (outline style)
- **Size**: 24px (w-6 h-6)
- **Badge**: Circular, red background (#ef4444), white text
- **Badge Position**: Absolute, top-right of icon (-top-1 -right-1)
- **Badge Size**: min-w-5 h-5, text-xs
- **Hover**: Opacity 80%

### Toast Notifications
- **Library**: react-hot-toast
- **Position**: top-right
- **Duration**: 3 seconds
- **Success Style**: Green background, white text
- **Message Format**: "Added [Product Name] to cart"

---

## ‚ôø **Accessibility Requirements**

### WCAG 2.1 Level AA Compliance
- **Color Contrast**: Minimum 4.5:1 for normal text, 3:1 for large text
- **Keyboard Navigation**: All interactive elements must be keyboard accessible (Tab, Enter, Space)
- **Focus Indicators**: Visible focus states (2px solid ring)
- **ARIA Labels**: Use semantic HTML first, ARIA when necessary
- **Screen Reader**: Announce cart updates

### Cart Icon Accessibility
```typescript
<button
  onClick={onClick}
  aria-label={`Shopping cart with ${itemCount} items`}
  className="relative focus:outline-none focus:ring-2 focus:ring-primary"
>
  <ShoppingCartIcon className="w-6 h-6" aria-hidden="true" />
  {itemCount > 0 && (
    <span 
      className="badge"
      aria-label={`${itemCount} items in cart`}
    >
      {itemCount}
    </span>
  )}
</button>
```

---

## üì± **Responsive Design**

### Breakpoints (Tailwind)
```css
sm: 640px   /* Mobile landscape */
md: 768px   /* Tablets */
lg: 1024px  /* Desktops */
xl: 1280px  /* Large desktops */
```

### Cart Icon Responsiveness
- **Mobile**: Cart icon visible, same size
- **Tablet**: Cart icon with text label option
- **Desktop**: Cart icon in header navigation

---

## üé≠ **Dark Mode**

### Implementation
- Use Tailwind `dark:` prefix for all dark mode styles
- Cart icon must be visible in both modes
- Badge must maintain 4.5:1 contrast in both modes


## ‚úÖ **Code Review Checklist**

Before submitting code, ensure:
- [ ] TypeScript types properly defined
- [ ] Component follows established structure
- [ ] Accessibility requirements met (ARIA, keyboard nav, focus states)
- [ ] Responsive design implemented
- [ ] Dark mode supported
- [ ] Unit tests written and passing (>80% coverage)
- [ ] No console errors or warnings
- [ ] Performance optimized (memo, useCallback)
- [ ] Error handling implemented
- [ ] JSDoc comments added
- [ ] Follows naming conventions
- [ ] Cart persists to localStorage
- [ ] Toast notifications work correctly

---

## üö´ **Anti-Patterns to Avoid**

### ‚ùå Don't Use
- Inline styles (use Tailwind classes)
- `any` type without justification
- Direct DOM manipulation
- Mutating state directly
- Prop drilling (use Context)
- Magic numbers (use named constants)

### ‚úÖ Do Use
- Tailwind CSS utility classes
- Proper TypeScript types
- React hooks (useState, useContext, useCallback)
- Context API for cart state
- Named constants for storage keys
- Immutable state updates

---

## üîÑ **Git Workflow**

### Branch Naming
- Feature: `feature/cart-icon-implementation`
- Bug fix: `fix/cart-icon-badge-position`
- Refactor: `refactor/cart-context-structure`

### Commit Messages
Follow Conventional Commits:
```
feat: add CartIcon component with item count badge
feat: implement cart state persistence in localStorage
feat: add toast notifications for cart actions
test: add unit tests for CartIcon component
docs: update cart component documentation
```

---

## üìö **Additional Resources**

- [React Context API](https://react.dev/reference/react/createContext)
- [Heroicons](https://heroicons.com/)
- [react-hot-toast](https://react-hot-toast.com/)
- [localStorage API](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- [WCAG Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

**Last Updated**: January 2026  
**Version**: 1.0  
**Maintainer**: Workshop Team
```

#### 2.4 Save Instructions File
- Save `.github/instructions.md`
- Commit to repository:
  ```bash
  git add .github/instructions.md
  git commit -m "docs: add design guardrails for cart icon implementation"
  ```

---

### **STEP 3: Analyze GitHub Issue with Spec Kit** 

#### 3.1 Open GitHub Copilot Chat
- Open Copilot Chat in VS Code: `Ctrl+Shift+I` (Windows) or `Cmd+Shift+I` (Mac)

#### 3.2 Use Spec Kit to Analyze Issue

Paste this prompt into Copilot Chat:

```
@workspace Using the GitHub Issue #[YOUR_ISSUE_NUMBER] for Cart Icon implementation, 
analyze the requirements and generate a detailed full-stack technical execution plan.

Review these specification documents from Phase 1:
- docs/github-issue-draft.md (complete issue description)
- docs/specifications/cart-icon-feature-requirements.md
- docs/investigation/cart-issue-analysis.md
- docs/knowledge-repository/technical-design-document.md
- docs/knowledge-repository/high-level-design.md
- docs/knowledge-repository/missing-requirements.md
- .github/instructions.md

Focus on FULL-STACK implementation:

**Frontend:**
- CartIcon component with badge
- CartContext for state management
- Header integration
- Toast notifications
- localStorage persistence

**Backend:**
- Cart API endpoints (GET, POST, DELETE /api/cart)
- Cart service layer
- Database integration (cart table or orders table)
- Request/response validation
- Error handling

Generate:
1. Technical breakdown of the issue into specific tasks (frontend + backend)
2. Component dependency tree (CartIcon ‚Üí CartContext ‚Üí Header ‚Üí API)
3. Backend API design (endpoints, request/response formats)
4. Database schema (if cart table needed)
5. Implementation order and milestones (backend-first or parallel)
6. Technical risks and mitigation strategies
7. Estimated effort for each task (in hours)
8. Testing strategy per component (frontend + backend unit/integration tests)
9. Definition of Done criteria

Format as a technical specification document following the design guardrails in .github/instructions.md
```

#### 3.3 Review Generated Spec
- Read through the technical execution plan
- Verify it follows architectural patterns from `.github/instructions.md`
- Check that cart-specific guidelines are referenced
- Ensure accessibility and testing requirements are included
- Confirm localStorage persistence strategy is detailed

#### 3.4 Save Technical Execution Plan
- Create new file: `docs/specifications/cart-components-execution-plan.md`
- Paste the generated plan
- Save the file

#### 3.5 Verify Execution Plan Structure

Ensure your execution plan contains:
- [ ] Task breakdown with sub-tasks
- [ ] Component dependency diagram
- [ ] Implementation sequence (Context ‚Üí Icon ‚Üí Integration ‚Üí Tests)
- [ ] Risk assessment (localStorage limits, browser compatibility)
- [ ] Time estimates per task
- [ ] Testing requirements per component
- [ ] Definition of Done for each task

---

### **STEP 4: Create Component Scaffolding Plan** 

#### 4.1 Open GitHub Copilot Chat

#### 4.2 Generate Scaffolding Specification

Ask Copilot:

```
@workspace Based on the technical execution plan in 
docs/specifications/cart-components-execution-plan.md and following the 
design guardrails in .github/instructions.md, create a detailed scaffolding 
specification for:

**FRONTEND COMPONENTS:**

1. CartContext Component
   - TypeScript interfaces (CartItem, CartState, CartContextType)
   - Context creation and provider
   - State management hooks (useState)
   - Cart operations (addItem, removeItem, clearCart)
   - localStorage persistence logic
   - API integration hooks (fetch cart from backend)
   - Error handling

2. CartIcon Component
   - TypeScript interface (CartIconProps)
   - Props structure (itemCount, onClick)
   - Icon import (Heroicons)
   - Badge rendering logic
   - Styling approach (Tailwind classes)
   - Accessibility attributes (ARIA labels)
   - Dark mode support

3. Header Integration
   - Import CartIcon
   - Use CartContext (useCart hook)
   - Position cart icon (top-right)
   - Navigation handler
   - Responsive layout

**BACKEND API:**

4. Cart API Routes (api/src/routes/cart.ts)
   - GET /api/cart - Get cart items
   - POST /api/cart/items - Add item to cart
   - PUT /api/cart/items/:id - Update item quantity
   - DELETE /api/cart/items/:id - Remove item
   - DELETE /api/cart - Clear cart
   - Request validation middleware
   - Error handling

5. Cart Service Layer (api/src/services/cartService.ts)
   - Business logic for cart operations
   - Database queries via repository
   - Cart calculations (total, itemCount)
   - Session management

6. Cart Repository (api/src/repositories/cartRepository.ts)
   - Database access layer
   - CRUD operations for cart_items table
   - Join with products table
   - SQLite queries

7. Database Migration (api/database/migrations/003_cart_items.sql)
   - CREATE TABLE cart_items
   - Indexes for performance
   - Foreign key constraints

For each component, provide:
- File structure
- Import statements
- Type definitions
- Component/function skeleton with TODO comments
- Styling classes (frontend) / SQL schema (backend)
- Test file structure

Ensure all code follows the cart-specific guidelines in .github/instructions.md
```

#### 4.3 Review Generated Scaffolding Spec
- Verify cart state structure matches design
- Check localStorage key: `'octocat-supply-chain-cart'`
- Ensure badge styling follows design system (red bg, circular)
- Confirm accessibility requirements included
- Verify dark mode support present

#### 4.4 Save Scaffolding Specification
- Create new file: `docs/specifications/cart-components-scaffolding.md`
- Paste the generated specification
- Save the file

---

### **STEP 5: Scaffold CartContext** 

#### 5.1 Create Cart Types File
- Create new file: `frontend/src/types/cart.ts`

#### 5.2 Generate Cart Type Definitions

Ask Copilot:

```
Create TypeScript type definitions for the cart feature in frontend/src/types/cart.ts

Include:
- CartItem interface (productId, name, price, quantity, image)
- CartState interface (items, itemCount, total)
- CartContextType interface (state + operations)

Follow .github/instructions.md guidelines.
```

#### 5.3 Save Cart Types
- Review and save `cart.ts`

#### 5.4 Create CartContext File
- Create new file: `frontend/src/context/CartContext.tsx`

#### 5.5 Generate CartContext Scaffold

Ask Copilot:

```
Create a scaffolded CartContext component following .github/instructions.md guidelines.

Requirements:
- Import React, createContext, useContext, useState, useEffect
- Import types from '../types/cart'
- Create CartContext with createContext
- Create CartProvider component
- Implement state: items (CartItem[])
- Implement derived values: itemCount, total
- Add cart operations: addItem, removeItem, clearCart (TODO placeholders)
- Add localStorage persistence:
  - Save to localStorage on items change
  - Load from localStorage on mount
  - Key: 'octocat-supply-chain-cart'
  - Handle JSON parse errors
- Export useCart custom hook
- Add JSDoc documentation
- Keep under 150 lines (scaffold only)

DO NOT implement full business logic yet - just structure and placeholders.
```

#### 5.6 Review Generated CartContext
- Check localStorage key is correct
- Verify error handling for JSON parse
- Ensure useCart hook throws error if used outside provider
- Confirm TypeScript types are properly used

#### 5.7 Save CartContext
- Save the file

#### 5.8 Create CartContext Test Scaffold
- Create new file: `frontend/src/context/CartContext.test.tsx`

#### 5.9 Generate Test Scaffold

Ask Copilot:

```
Create a test file scaffold for CartContext following .github/instructions.md.

Include test cases for:
- Provides cart state to children
- addItem adds product to cart
- removeItem removes product from cart
- clearCart empties the cart
- itemCount calculates correctly
- total calculates correctly
- Saves to localStorage on change
- Loads from localStorage on mount
- Handles invalid localStorage data gracefully
- useCart throws error outside provider

Use Vitest and React Testing Library.
Add TODO comments for test implementation.
```

#### 5.10 Save Test Scaffold
- Save the test file

---

### **STEP 6: Scaffold CartIcon Component** 

#### 6.1 Create Cart Components Folder
```bash
mkdir -p frontend/src/components/cart
```

#### 6.2 Create CartIcon Component File
- Create new file: `frontend/src/components/cart/CartIcon.tsx`

#### 6.3 Generate CartIcon Scaffold

Ask Copilot:

```
Create a scaffolded CartIcon component following .github/instructions.md guidelines.

Requirements:
- Import React from 'react'
- Import ShoppingCartIcon from '@heroicons/react/24/outline'
- Define CartIconProps interface:
  - itemCount: number
  - onClick: () => void
  - className?: string
- Create functional component with TypeScript
- Component structure:
  - Button wrapper with onClick
  - ShoppingCartIcon (w-6 h-6)
  - Badge (only if itemCount > 0)
    - Position: absolute, top-right (-top-1 -right-1)
    - Style: circular, red bg, white text, min-w-5 h-5
    - Display itemCount
- Accessibility:
  - aria-label: "Shopping cart with X items"
  - focus ring (focus:ring-2 focus:ring-primary)
  - keyboard accessible
- Dark mode: text-gray-700 dark:text-gray-200
- Hover: opacity-80
- Add JSDoc documentation
- Keep under 100 lines

DO NOT add complex logic - just UI structure.
```

#### 6.4 Review Generated CartIcon
- Check icon size (w-6 h-6)
- Verify badge positioning (absolute, -top-1 -right-1)
- Ensure badge only shows when itemCount > 0
- Confirm accessibility attributes present
- Check dark mode classes

#### 6.5 Save CartIcon Component
- Save the file

#### 6.6 Create CartIcon Test Scaffold
- Create new file: `frontend/src/components/cart/CartIcon.test.tsx`

#### 6.7 Generate Test Scaffold

Ask Copilot:

```
Create a test file scaffold for CartIcon component following .github/instructions.md.

Include test cases for:
- Renders shopping cart icon
- Displays badge when itemCount > 0
- Hides badge when itemCount is 0
- Shows correct number in badge
- Calls onClick when clicked
- Has proper ARIA label with item count
- Is keyboard accessible (Tab, Enter, Space)
- Supports dark mode (check dark: classes)
- Has focus indicator

Use Vitest and React Testing Library.
Add TODO comments for test implementation.
```

#### 6.8 Save Test Scaffold
- Save the test file

---

### **STEP 7: Scaffold Header Integration** 

#### 7.1 Locate Header Component
- Find existing file: `frontend/src/components/layout/Header.tsx`

#### 7.2 Generate Header Integration Plan

Ask Copilot:

```
@workspace Analyze frontend/src/components/layout/Header.tsx and create a plan 
to integrate the CartIcon component.

Following .github/instructions.md:
1. Where should CartIcon be positioned? (top-right of header)
2. What imports are needed? (CartIcon, useCart)
3. How to get itemCount? (useCart hook from CartContext)
4. How to handle click? (navigate to /cart with useNavigate)
5. Responsive layout considerations?
6. Any existing nav items to align with?

Provide:
- Code snippet showing where to add CartIcon
- Import statements needed
- Hook usage (useCart, useNavigate)
- Styling classes for positioning
- TODO comments for implementation

Keep modifications minimal and focused.
```

#### 7.3 Save Header Integration Plan
- Create new file: `docs/specifications/header-integration-plan.md`
- Paste the plan
- Save the file

---

### **STEP 8: Create Toast Notification Setup** (10 minutes)

#### 8.1 Check Package Dependencies

Ask Copilot:

```
Check if react-hot-toast is installed in frontend/package.json. 
If not, provide the npm install command.
```

#### 8.2 Install Toast Library (if needed)
```bash
cd frontend
npm install react-hot-toast
```

#### 8.3 Generate Toast Configuration Plan

Ask Copilot:

```
Create a setup plan for react-hot-toast following .github/instructions.md.

Include:
1. Where to add Toaster component? (App.tsx or main.tsx)
2. Toast configuration (position: top-right, duration: 3000ms)
3. Usage pattern for "Added to cart" messages
4. Success toast styling (green bg, white text)
5. Example: toast.success(\`Added \${productName} to cart\`)

Provide code snippets with TODO comments.
```

#### 8.4 Save Toast Configuration Plan
- Create new file: `docs/specifications/toast-setup-plan.md`
- Paste the plan
- Save the file

---

### **STEP 9: Scaffold Backend Cart API** 

#### 9.1 Create Database Migration
- Create new file: `supply-chain-system/api/database/migrations/003_add_cart_items.sql`

#### 9.2 Generate Cart Table Schema

Ask Copilot:

```
Create a database migration for the cart_items table following the existing migration patterns in api/database/migrations/.

Requirements:
- Table name: cart_items
- Columns:
  - id (INTEGER PRIMARY KEY AUTOINCREMENT)
  - session_id (TEXT, for guest users)
  - product_id (INTEGER, foreign key to products)
  - quantity (INTEGER, default 1)
  - created_at (DATETIME)
  - updated_at (DATETIME)
- Foreign key constraint to products table
- Index on session_id for fast lookups
- Index on product_id

Follow SQLite syntax and existing migration style.
```

#### 9.3 Save Migration File
- Review and save the migration

#### 9.4 Create Cart Repository
- Create new file: `supply-chain-system/api/src/repositories/cartRepository.ts`

#### 9.5 Generate Repository Scaffold

Ask Copilot:

```
Create a CartRepository following the existing repository pattern in api/src/repositories/.

Follow the structure of existing repositories (e.g., productRepository.ts).

Include methods:
- getCartBySession(sessionId: string): Promise<CartItem[]>
- addItemToCart(sessionId: string, productId: number, quantity: number): Promise<void>
- updateCartItemQuantity(id: number, quantity: number): Promise<void>
- removeCartItem(id: number): Promise<void>
- clearCart(sessionId: string): Promise<void>
- getCartItemCount(sessionId: string): Promise<number>

Use SQLite database connection from existing db config.
Add TODO comments for SQL query implementation.
Include error handling.
```

#### 9.6 Save Repository File
- Review and save the repository

#### 9.7 Create Cart Service
- Create new file: `supply-chain-system/api/src/services/cartService.ts`

#### 9.8 Generate Service Scaffold

Ask Copilot:

```
Create a CartService for business logic following .github/instructions.md.

Include:
- Import CartRepository
- Methods:
  - getCart(sessionId: string): CartResponse
  - addToCart(sessionId: string, productId: number, quantity: number): CartResponse
  - updateQuantity(itemId: number, quantity: number): CartResponse
  - removeItem(itemId: number): CartResponse
  - clearCart(sessionId: string): void
- Calculate total price and item count
- Validate quantity (min 1, max 99)
- Error handling for invalid product IDs
- Add TODO comments for implementation

Types:
- CartItem interface
- CartResponse interface
- AddToCartRequest interface
```

#### 9.9 Save Service File
- Review and save the service

#### 9.10 Create Cart Routes
- Create new file: `supply-chain-system/api/src/routes/cart.ts`

#### 9.11 Generate Routes Scaffold

Ask Copilot:

```
Create Express cart routes following the existing route pattern in api/src/routes/.

Endpoints:
- GET /api/cart - Get cart for session
- POST /api/cart/items - Add item to cart
- PUT /api/cart/items/:id - Update item quantity
- DELETE /api/cart/items/:id - Remove item
- DELETE /api/cart - Clear entire cart

For each route:
- Import CartService
- Extract session ID from cookies or generate new
- Call appropriate service method
- Return JSON response
- Handle errors with appropriate status codes
- Add TODO comments for implementation

Include middleware:
- express.json() for body parsing
- Validation middleware (TODO)
```

#### 9.12 Save Routes File
- Review and save the routes

#### 9.13 Register Cart Routes
- Modify: `supply-chain-system/api/src/index.ts`

Ask Copilot:

```
Update api/src/index.ts to register the cart routes.

Add:
- Import cart routes: import cartRoutes from './routes/cart';
- Register routes: app.use('/api/cart', cartRoutes);

Follow the existing pattern for other routes (products, suppliers, etc.).
```

#### 9.14 Create Backend Test Scaffolds
- Create test files:
  - `supply-chain-system/api/src/repositories/cartRepository.test.ts`
  - `supply-chain-system/api/src/services/cartService.test.ts`
  - `supply-chain-system/api/src/routes/cart.test.ts`

Ask Copilot:

```
Create test file scaffolds for:
1. CartRepository tests (database operations)
2. CartService tests (business logic)
3. Cart routes tests (API endpoints)

Use existing test patterns from api/src/repositories/ and api/src/routes/.
Include test cases for:
- Adding items to cart
- Updating quantities
- Removing items
- Clearing cart
- Error scenarios (invalid product ID, invalid quantity)
- Session management

Add TODO comments for test implementation.
```

#### 9.15 Save Test Files
- Review and save all test scaffolds

---

### **STEP 10: Create Component Documentation** 

#### 10.1 Create Cart Components README
- Create new file: `supply-chain-system/frontend/src/components/cart/README.md`

#### 10.2 Generate Component Documentation

Ask Copilot:

```
@workspace Create comprehensive documentation for the scaffolded cart components (frontend + backend).

Include:

**FRONTEND:**
1. **Overview** - Purpose of each component (CartContext, CartIcon)
2. **Component API** - Props, types, hooks
3. **Usage Examples** - Code snippets showing how to use
4. **Design System Compliance** - Colors, spacing, typography from .github/instructions.md
5. **Accessibility Features** - ARIA labels, keyboard nav
6. **Responsive Behavior** - Mobile, tablet, desktop
7. **Dark Mode Support** - dark: classes used
8. **localStorage Strategy** - Key, persistence, error handling
9. **API Integration** - How CartContext calls backend API

**BACKEND:**
10. **Cart API Endpoints** - Routes, request/response formats
11. **Database Schema** - cart_items table structure
12. **Service Layer** - Business logic and cart calculations
13. **Repository Layer** - Database access patterns
14. **Session Management** - How guest carts work
15. **Error Handling** - API error responses

**TESTING:**
16. **Frontend Tests** - Component and context tests
17. **Backend Tests** - API, service, repository tests
18. **Integration Tests** - Full cart flow testing

**IMPLEMENTATION:**
19. **Next Implementation Steps** - TODOs from scaffolds
20. **Implementation Order** - Backend-first or parallel approach

Reference specifications in docs/specifications/ and design guardrails in .github/instructions.md
```

#### 10.3 Review Documentation
- Ensure all component props documented
- Check usage examples are clear
- Verify design system references accurate
- Confirm localStorage key documented
- Verify backend API documentation complete

#### 10.4 Save Component Documentation
- Save the README file

---

### **STEP 11: Validate Against Design Guardrails** (10 minutes)

#### 11.1 Open GitHub Copilot Chat

#### 11.2 Run Validation Check

Ask Copilot:

```
@workspace Review the scaffolded cart components (frontend + backend):

**Frontend:**
- supply-chain-system/frontend/src/context/CartContext.tsx
- supply-chain-system/frontend/src/components/cart/CartIcon.tsx
- docs/specifications/header-integration-plan.md

**Backend:**
- supply-chain-system/api/database/migrations/003_add_cart_items.sql
- supply-chain-system/api/src/repositories/cartRepository.ts
- supply-chain-system/api/src/services/cartService.ts
- supply-chain-system/api/src/routes/cart.ts

Validate against .github/instructions.md design guardrails:

1. **Architecture Patterns**
   - Component structure follows guidelines?
   - File organization correct?
   - Component size under 200 lines?

2. **Design System**
   - Colors from defined palette? (cart badge red #ef4444)
   - Icon sizing correct? (w-6 h-6)
   - Spacing uses 4px base unit?
   - Border radius for badge (rounded-full)?

3. **Coding Standards**
   - TypeScript strict mode?
   - Props interfaces defined?
   - Naming conventions followed?

4. **Accessibility**
   - ARIA labels present?
   - Keyboard navigation supported?
   - Focus indicators included?

5. **Cart-Specific Guidelines**
   - localStorage key correct? ('octocat-supply-chain-cart')
   - Badge design matches spec?
   - Toast notifications planned?

6. **Dark Mode**
   - dark: prefix used?
   - Badge maintains contrast?

7. **Backend API Design**
   - RESTful endpoint structure?
   - Consistent with existing API patterns?
   - Proper error handling?
   - Request/response validation?

8. **Database Design**
   - Migration follows existing pattern?
   - Foreign key constraints defined?
   - Indexes for performance?
   - SQLite syntax correct?

9. **Service/Repository Pattern**
   - Follows existing repository structure?
   - Business logic in service layer?
   - Database access in repository?
   - Error handling consistent?

Generate a validation report with:
- ‚úÖ Compliant items
- ‚ö†Ô∏è Items needing attention
- ‚ùå Non-compliant items
- Recommendations for fixes (frontend + backend)
```

#### 11.3 Review Validation Report
- Read through compliance check
- Note any issues or warnings
- Check localStorage key is correct
- Verify cart-specific guidelines followed
- Verify backend API patterns match existing code

#### 11.4 Save Validation Report
- Create new file: `docs/specifications/cart-validation-report.md`
- Paste the validation report
- Save the file

#### 11.5 Fix Any Non-Compliant Items
If there are any ‚ùå items:
- Ask Copilot to fix them with specific instructions
- Update the component files
- Re-run validation
- Verify fixes are correct

---

### **STEP 12: Create Implementation Milestones** 

#### 12.1 Open GitHub Copilot Chat

#### 12.2 Generate Milestone Plan

Ask Copilot:

```
@workspace Based on the technical execution plan and scaffolded cart components (frontend + backend), 
create a detailed implementation milestone plan for the Cart Icon feature.

Break down into phases:

**Phase 0: Backend Cart API Setup** (3-4 hours)
- Run database migration (cart_items table)
- Implement CartRepository (database layer)
- Implement CartService (business logic)
- Implement Cart API routes
- Test API endpoints with Postman/curl
- Unit test repository and service

**Phase 1: Frontend Cart Infrastructure** (2-3 hours)
- Implement CartContext with state management
- Add localStorage persistence
- Integrate with backend API
- Create useCart custom hook
- Unit test CartContext

**Phase 2: Cart Icon Component** (1-2 hours)
- Complete CartIcon component UI
- Integrate badge rendering
- Add hover and focus states
- Unit test CartIcon

**Phase 3: Header Integration** (1-2 hours)
- Integrate CartIcon into Header
- Add navigation to /cart
- Test responsive layout
- Verify dark mode

**Phase 4: Toast Notifications** (1 hour)
- Set up react-hot-toast
- Add "Added to cart" messages
- Test toast positioning and timing
- Verify accessibility

**Phase 5: Testing & Polish** (2-3 hours)
- Complete all frontend unit tests
- Complete all backend unit tests
- Integration testing (frontend ‚Üí backend ‚Üí database)
- E2E testing (full cart user flow)
- API endpoint testing
- Accessibility audit
- Performance optimization

For each phase:
- List specific tasks with checkboxes
- Define deliverables
- Set acceptance criteria
- Estimate effort (hours)
- Identify dependencies

Format as a project plan with clear completion criteria.
```

#### 12.3 Review Milestone Plan
- Verify logical task order (backend-first recommended)
- Check effort estimates are reasonable
- Ensure all requirements from Phase 1 covered (frontend + backend)
- Confirm acceptance criteria are clear
- Verify backend API work included

#### 12.4 Save Milestone Plan
- Create new file: `docs/specifications/cart-implementation-milestones.md`
- Paste the milestone plan
- Save the file

---

### **STEP 13: Update GitHub Issue with Technical Plan**

#### 13.1 Open Your GitHub Issue
- Go to your repository on GitHub
- Navigate to the Issue created in Phase 1
- URL: `https://github.com/CanarysPlayground/ai-sdlc-brownfield-workshop/issues/[NUMBER]`

#### 13.2 Add Technical Specification Comment

Click "Add a comment" and post:

```markdown
## üìã Technical Specification & Scaffolding Complete (Full-Stack)

### Documents Created:
- ‚úÖ Design Guardrails: `.github/instructions.md` (frontend + backend)
- ‚úÖ Technical Execution Plan: `docs/specifications/cart-components-execution-plan.md`
- ‚úÖ Scaffolding Specification: `docs/specifications/cart-components-scaffolding.md`
- ‚úÖ Implementation Milestones: `docs/specifications/cart-implementation-milestones.md`
- ‚úÖ Validation Report: `docs/specifications/cart-validation-report.md`
- ‚úÖ Header Integration Plan: `docs/specifications/header-integration-plan.md`
- ‚úÖ Toast Setup Plan: `docs/specifications/toast-setup-plan.md`

### Frontend Components Scaffolded:
- ‚úÖ `supply-chain-system/frontend/src/types/cart.ts` - Type definitions for cart
- ‚úÖ `supply-chain-system/frontend/src/context/CartContext.tsx` - Cart state management with localStorage + API integration
- ‚úÖ `supply-chain-system/frontend/src/context/CartContext.test.tsx` - Context test scaffold
- ‚úÖ `supply-chain-system/frontend/src/components/cart/CartIcon.tsx` - Cart icon with badge
- ‚úÖ `supply-chain-system/frontend/src/components/cart/CartIcon.test.tsx` - Icon test scaffold
- ‚úÖ `supply-chain-system/frontend/src/components/cart/README.md` - Component documentation

### Backend API Scaffolded:
- ‚úÖ `supply-chain-system/api/database/migrations/003_add_cart_items.sql` - Cart items table schema
- ‚úÖ `supply-chain-system/api/src/repositories/cartRepository.ts` - Database access layer
- ‚úÖ `supply-chain-system/api/src/services/cartService.ts` - Business logic layer
- ‚úÖ `supply-chain-system/api/src/routes/cart.ts` - API endpoints
- ‚úÖ `supply-chain-system/api/src/repositories/cartRepository.test.ts` - Repository test scaffold
- ‚úÖ `supply-chain-system/api/src/services/cartService.test.ts` - Service test scaffold
- ‚úÖ `supply-chain-system/api/src/routes/cart.test.ts` - API route test scaffold

### Compliance:
All scaffolded components follow full-stack architectural patterns and design guardrails defined in `.github/instructions.md`:

**Frontend:**
- ‚úÖ Cart state uses Context API
- ‚úÖ localStorage persistence with error handling
- ‚úÖ Badge styling matches design system (red bg, circular)
- ‚úÖ Icon size 24px (w-6 h-6)
- ‚úÖ Accessibility attributes included
- ‚úÖ Dark mode support implemented
- ‚úÖ TypeScript strict mode
- ‚úÖ API integration hooks prepared

**Backend:**
- ‚úÖ RESTful API design (/api/cart endpoints)
- ‚úÖ Repository pattern for database access
- ‚úÖ Service layer for business logic
- ‚úÖ SQLite migration following existing pattern
- ‚úÖ Session-based cart support
- ‚úÖ Error handling and validation
- ‚úÖ TypeScript for type safety

### Key Technical Decisions:
- **Frontend State Management**: React Context API (CartContext)
- **Frontend Persistence**: localStorage with key `'octocat-supply-chain-cart'`
- **Backend Persistence**: SQLite database (cart_items table)
- **API Design**: RESTful endpoints with session support
- **Icon Library**: Heroicons (outline style)
- **Toast Library**: react-hot-toast
- **Testing**: Vitest + React Testing Library (frontend), Vitest (backend)

### Next Steps:
Ready to proceed with implementation following the milestone plan:
1. **Phase 0**: Backend Cart API Setup (database + API endpoints)
2. **Phase 1**: Frontend Cart Infrastructure (context + hooks)
3. **Phase 2-5**: UI components, integration, testing

---
**Phase**: Technical Planning & Scaffolding (Full-Stack) ‚úÖ Complete  
**Next Phase**: Agentic Implementation (Workshop 1 - Phase 3)
```

#### 13.3 Add Labels
Add these labels to the issue:
- `technical-planning-complete`
- `ready-for-implementation`
- `full-stack`

#### 13.4 Save Comment
- Click "Comment" button

---

### **STEP 14: Commit Scaffolding to Git** 

#### 14.1 Check Git Status
```bash
git status
```

You should see:
- `.github/instructions.md`
- `docs/specifications/*` (multiple new files)
- `supply-chain-system/frontend/src/types/cart.ts`
- `supply-chain-system/frontend/src/context/CartContext.tsx`
- `supply-chain-system/frontend/src/context/CartContext.test.tsx`
- `supply-chain-system/frontend/src/components/cart/CartIcon.tsx`
- `supply-chain-system/frontend/src/components/cart/CartIcon.test.tsx`
- `supply-chain-system/frontend/src/components/cart/README.md`
- `supply-chain-system/api/database/migrations/003_add_cart_items.sql`
- `supply-chain-system/api/src/repositories/cartRepository.ts`
- `supply-chain-system/api/src/services/cartService.ts`
- `supply-chain-system/api/src/routes/cart.ts`
- `supply-chain-system/api/src/repositories/cartRepository.test.ts`
- `supply-chain-system/api/src/services/cartService.test.ts`
- `supply-chain-system/api/src/routes/cart.test.ts`

#### 14.2 Stage Changes
```bash
git add .
```

#### 14.3 Commit Changes
```bash
git commit -m "feat: add full-stack technical planning and cart scaffolding

Frontend:
- Create design guardrails in .github/instructions.md with cart-specific guidelines
- Define cart types (CartItem, CartState, CartContextType)
- Scaffold CartContext with localStorage persistence + API integration
- Scaffold CartIcon component with badge and accessibility
- Create test scaffolds for CartContext and CartIcon
- Document header integration and toast setup plans

Backend:
- Create cart_items database migration (SQLite)
- Scaffold CartRepository for database access layer
- Scaffold CartService for business logic
- Scaffold Cart API routes (GET, POST, PUT, DELETE)
- Register cart routes in Express app
- Create test scaffolds for repository, service, and routes

Planning:
- Generate full-stack technical execution plan
- Create implementation milestone plan (6 phases: backend + frontend)
- Validate scaffolds against design guardrails

All components follow architectural patterns and design system constraints.

Relates to #[ISSUE_NUMBER]"
```

#### 14.4 Push to Repository
```bash
git push origin main
```

Or if working on a feature branch:
```bash
git checkout -b feature/cart-icon-full-stack-scaffolding
git push origin feature/cart-icon-full-stack-scaffolding
```

---

### **STEP 15: Verify Scaffolding Structure** 

#### 15.1 Check File Structure

Verify these files exist:

```
.github/
  ‚îî‚îÄ‚îÄ instructions.md

docs/
  ‚îî‚îÄ‚îÄ specifications/
      ‚îú‚îÄ‚îÄ cart-components-execution-plan.md
      ‚îú‚îÄ‚îÄ cart-components-scaffolding.md
      ‚îú‚îÄ‚îÄ cart-implementation-milestones.md
      ‚îú‚îÄ‚îÄ cart-validation-report.md
      ‚îú‚îÄ‚îÄ header-integration-plan.md
      ‚îî‚îÄ‚îÄ toast-setup-plan.md

supply-chain-system/
  ‚îú‚îÄ‚îÄ frontend/
  ‚îÇ   ‚îî‚îÄ‚îÄ src/
  ‚îÇ       ‚îú‚îÄ‚îÄ types/
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ cart.ts
  ‚îÇ       ‚îú‚îÄ‚îÄ context/
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CartContext.tsx
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ CartContext.test.tsx
  ‚îÇ       ‚îî‚îÄ‚îÄ components/
  ‚îÇ           ‚îî‚îÄ‚îÄ cart/
  ‚îÇ               ‚îú‚îÄ‚îÄ README.md
  ‚îÇ               ‚îú‚îÄ‚îÄ CartIcon.tsx
  ‚îÇ               ‚îî‚îÄ‚îÄ CartIcon.test.tsx
  ‚îî‚îÄ‚îÄ api/
      ‚îú‚îÄ‚îÄ database/
      ‚îÇ   ‚îî‚îÄ‚îÄ migrations/
      ‚îÇ       ‚îî‚îÄ‚îÄ 003_add_cart_items.sql
      ‚îî‚îÄ‚îÄ src/
          ‚îú‚îÄ‚îÄ repositories/
          ‚îÇ   ‚îú‚îÄ‚îÄ cartRepository.ts
          ‚îÇ   ‚îî‚îÄ‚îÄ cartRepository.test.ts
          ‚îú‚îÄ‚îÄ services/
          ‚îÇ   ‚îú‚îÄ‚îÄ cartService.ts
          ‚îÇ   ‚îî‚îÄ‚îÄ cartService.test.ts
          ‚îî‚îÄ‚îÄ routes/
              ‚îú‚îÄ‚îÄ cart.ts
              ‚îî‚îÄ‚îÄ cart.test.ts
```

#### 15.2 Verify Component Structure

Open each frontend and backend file and verify:
- [ ] TypeScript interfaces defined (CartItem, CartContextType, CartIconProps)
- [ ] Component structure present with proper imports
- [ ] TODO comments for implementation
- [ ] Tailwind CSS classes following design system
- [ ] Accessibility attributes (ARIA labels, focus states)
- [ ] Dark mode support (dark: prefix)
- [ ] JSDoc documentation

#### 15.3 Verify Cart-Specific Elements

**Frontend:**
- [ ] CartContext: localStorage key `'octocat-supply-chain-cart'`
- [ ] CartIcon: ShoppingCartIcon from Heroicons
- [ ] CartIcon: Badge with red background (#ef4444)
- [ ] CartIcon: Badge positioned absolute, top-right
- [ ] CartIcon: Badge only shows when itemCount > 0
- [ ] CartIcon: Icon size 24px (w-6 h-6)
- [ ] CartContext: Error handling for localStorage
- [ ] CartContext: API integration hooks prepared
- [ ] useCart hook throws error outside provider

**Backend:**
- [ ] Database migration: cart_items table with proper schema
- [ ] CartRepository: CRUD methods defined
- [ ] CartService: Business logic layer with cart calculations
- [ ] Cart routes: RESTful endpoints (GET, POST, PUT, DELETE)
- [ ] Routes registered in main Express app
- [ ] Session management for guest carts
- [ ] Error handling in all layers
- [ ] TypeScript types for API requests/responses

#### 15.4 Verify Test Structure

Open each test file and verify:

**Frontend Tests:**
- [ ] Test suite structure present (describe, it)
- [ ] Test cases defined with clear names
- [ ] TODO comments for implementation
- [ ] Imports correct (Vitest, React Testing Library)
- [ ] Mock data structures defined

**Backend Tests:**
- [ ] Test suite structure present (describe, it)
- [ ] Test cases for each API endpoint
- [ ] Test cases for service layer logic
- [ ] Test cases for repository database operations
- [ ] TODO comments for implementation
- [ ] Mock database setup/teardown planned

---

## ‚úÖ **FINAL CHECKLIST**

### **Planning & Documentation:**
- [ ] GitHub Issue reviewed from Phase 1
- [ ] Design guardrails created (`.github/instructions.md`)
- [ ] Cart-specific guidelines included in guardrails
- [ ] Technical execution plan generated and saved
- [ ] Scaffolding specification created
- [ ] Implementation milestones defined (5 phases)
- [ ] Component documentation written

### **Component Scaffolding:**

**Frontend:**
- [ ] Cart type interfaces defined (`cart.ts`)
- [ ] CartContext scaffolded with localStorage + API hooks
- [ ] CartContext test scaffold created
- [ ] CartIcon component scaffolded with badge
- [ ] CartIcon test scaffold created
- [ ] Header integration plan documented
- [ ] Toast setup plan documented

**Backend:**
- [ ] Database migration created (`003_add_cart_items.sql`)
- [ ] CartRepository scaffolded (database layer)
- [ ] CartService scaffolded (business logic)
- [ ] Cart API routes scaffolded
- [ ] Routes registered in Express app
- [ ] Repository test scaffold created
- [ ] Service test scaffold created
- [ ] API routes test scaffold created

### **Validation:**
- [ ] Validation report generated
- [ ] All components compliant with cart-specific guidelines
- [ ] Design system constraints verified (badge color, icon size)
- [ ] Accessibility requirements included
- [ ] TypeScript types properly defined
- [ ] localStorage key correct

### **Git & GitHub:**
- [ ] Changes committed with descriptive message
- [ ] Pushed to repository
- [ ] GitHub Issue updated with technical spec
- [ ] Labels added: `technical-planning-complete`, `ready-for-implementation`

---

## üéì **Key Learnings**

### **1. Spec Kit Usage for Full-Stack Feature Implementation**
- Break down feature requests into frontend + backend tasks
- Generate structured execution plans across the stack
- Identify dependencies (Database ‚Üí API ‚Üí Context ‚Üí Icon ‚Üí Integration)
- Plan for state management, persistence, and API integration

### **2. Design Guardrails for Full-Stack Consistency**
- Establish feature-specific guidelines (cart icon design + API design)
- Define state management patterns (Context API + backend services)
- Specify persistence strategy (localStorage + database)
- Define API contracts (REST endpoints, request/response formats)
- Guide AI agents with clear constraints across frontend and backend

### **3. Scaffolding Benefits**
- Faster development start with clear structure
- Consistent component patterns across team
- Clear implementation roadmap with TODOs
- Reduced decision fatigue during coding

### **4. Cart-Specific Considerations**
- State persistence crucial for user experience
- Error handling for localStorage failures
- Accessibility for dynamic content (item count)
- Visual feedback (badge, toast) for user actions

### **5. Full-Stack Component Dependencies**
- Database provides persistence (cart_items table)
- Repository handles database access (CRUD operations)
- Service layer contains business logic (calculations, validation)
- API routes expose endpoints (RESTful interface)
- Frontend Context calls API and manages local state
- Icon consumes context via custom hook
- Header integrates icon at layout level
- Tests verify each layer independently (repository ‚Üí service ‚Üí routes ‚Üí context ‚Üí component)

### **6. Backend Scaffolding Best Practices**
- Layer architecture: Routes ‚Üí Services ‚Üí Repositories ‚Üí Database
- Separation of concerns: business logic vs. data access
- Database migrations for schema changes
- Session management for guest cart support
- Error handling at each layer
- TypeScript for type safety across the stack

---

## üí° **Troubleshooting**

### **Issue: Copilot not following cart-specific guidelines**
**Solution:**
- Ensure `.github/instructions.md` contains cart section
- Reference it explicitly: "following cart-specific guidelines in .github/instructions.md"
- Provide specific values: badge color (#ef4444), localStorage key

### **Issue: Generated scaffold missing localStorage**
**Solution:**
- Ask specifically: "Add localStorage persistence with key 'octocat-supply-chain-cart'"
- Request error handling: "Handle JSON parse errors gracefully"
- Emphasize: "Save on every cart change, load on mount"

### **Issue: Badge positioning incorrect**
**Solution:**
- Specify exact classes: "position: absolute, -top-1 -right-1"
- Reference design system: "circular badge, min-w-5 h-5"
- Ask for verification: "Verify badge appears top-right of icon"

### **Issue: TypeScript errors in cart types**
**Solution:**
- Ask Copilot to fix specific errors
- Verify imports: `import type { CartItem } from '../types/cart'`
- Check tsconfig.json has "strict": true

### **Issue: Toast library not installed**
**Solution:**
- Run: `npm install react-hot-toast`
- Verify in package.json
- Ask Copilot for setup: "Configure Toaster component in App.tsx"

---

## üöÄ **Next Steps**

You're now ready for **Phase 3: Agentic Implementation (Full-Stack)**

In the next phase, you will:

**Backend Implementation:**
1. Run database migration to create cart_items table
2. Implement CartRepository with database queries
3. Implement CartService with business logic
4. Implement Cart API routes
5. Test API endpoints
6. Write and run backend unit tests

**Frontend Implementation:**
7. Use GitHub Copilot Agent Mode to implement scaffolded components
8. Complete CartContext with API integration
9. Implement CartIcon with badge logic
10. Integrate cart icon into Header
11. Add toast notifications
12. Write and run frontend unit tests

**Integration & Testing:**
13. Integration testing (frontend ‚Üí backend ‚Üí database)
14. E2E testing (full cart user flow)
15. Validate accessibility and responsiveness
16. Create pull request for review

---

## üìö **Additional Resources**

- [GitHub Copilot Spec Kit Documentation](https://github.com/features/copilot)
- [React Context API Best Practices](https://react.dev/learn/passing-data-deeply-with-context)
- [localStorage API Guide](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- [Heroicons React](https://heroicons.com/)
- [react-hot-toast Documentation](https://react-hot-toast.com/)
- [Component-Driven Development](https://www.componentdriven.org/)

---

**üéâ Congratulations!** You've completed technical planning and scaffolding for the Cart Icon feature!

**Next Phase**: Phase 3 - Agentic Implementation  
**Repository**: https://github.com/CanarysPlayground/ai-sdlc-brownfield-workshop
